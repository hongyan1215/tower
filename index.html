<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>粒子塔防戰略遊戲</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            background: #0a0a0a;
            font-family: 'Courier New', monospace;
            overflow: hidden;
        }
        
        #gameCanvas {
            border: 2px solid #333;
            cursor: crosshair;
        }
        
        #ui {
            position: absolute;
            top: 10px;
            left: 10px;
            color: #00ff00;
            font-size: 12px;
            z-index: 100;
            max-width: 320px;
        }
        
        .tower-button {
            background: rgba(0, 255, 0, 0.2);
            border: 1px solid #00ff00;
            color: #00ff00;
            padding: 6px 8px;
            margin: 2px;
            cursor: pointer;
            font-family: inherit;
            font-size: 11px;
        }
        
        .tower-button:hover {
            background: rgba(0, 255, 0, 0.4);
        }
        
        .tower-button.selected {
            background: rgba(0, 255, 0, 0.6);
        }
    </style>
</head>
<body>
    <div id="ui">
        <div>生命值: <span id="health">100</span></div>
        <div>金錢: <span id="money">500</span></div>
        <div>波次: <span id="wave">1</span></div>
        <!-- 基礎攻擊塔 -->
        <div style="display: flex; flex-wrap: wrap; gap: 2px;">
            <button class="tower-button" data-tower="machinegun">機槍(80)</button>
            <button class="tower-button" data-tower="sniper">狙擊(200)</button>
            <button class="tower-button" data-tower="cannon">加農(180)</button>
        </div>
        <!-- 元素攻擊塔 -->
        <div style="display: flex; flex-wrap: wrap; gap: 2px; margin-top: 2px;">
            <button class="tower-button" data-tower="freeze">冰凍(100)</button>
            <button class="tower-button" data-tower="chain">雷電(220)</button>
            <button class="tower-button" data-tower="flame">火焰(170)</button>
        </div>
        <!-- 範圍攻擊塔 -->
        <div style="display: flex; flex-wrap: wrap; gap: 2px; margin-top: 2px;">
            <button class="tower-button" data-tower="poison">毒氣(140)</button>
            <button class="tower-button" data-tower="multishot">多管(250)</button>
            <button class="tower-button" data-tower="tornado">旋風(190)</button>
        </div>
        <!-- 輔助塔 -->
        <div style="display: flex; flex-wrap: wrap; gap: 2px; margin-top: 2px;">
            <button class="tower-button" data-tower="debuff">詛咒(150)</button>
            <button class="tower-button" data-tower="money">金錢(150)</button>
            <button class="tower-button" data-tower="heal">治療(160)</button>
        </div>
        <div style="margin-top: 5px; display: flex; gap: 2px;">
            <button id="upgradeBtn" class="tower-button" style="background: rgba(255, 255, 0, 0.2); border-color: #ffff00;">升級</button>
            <button id="sellBtn" class="tower-button" style="background: rgba(255, 0, 0, 0.2); border-color: #ff0000;">出售</button>
        </div>
        <div style="margin-top: 5px;">
            <div style="font-size: 11px;">下一波: <span id="nextWaveInfo">準備中...</span></div>
            <button id="startWaveBtn" class="tower-button" style="margin-top: 2px;">提前開始 (+50金)</button>
        </div>
        <div id="missionPanel" style="margin-top: 8px; padding: 5px; border: 1px solid #00ff00; background: rgba(0, 255, 0, 0.1); font-size: 10px;">
            <div style="font-weight: bold; color: #ffff00;">當前任務</div>
            <div id="missionName">無任務</div>
            <div id="missionDesc">等待新任務...</div>
            <div id="missionProgress">進度: 0/0</div>
            <div id="missionReward" style="color: #00ffff;">獎勵: 0金</div>
        </div>
        <div style="margin-top: 8px; font-size: 9px; color: #888;">
            <div>💡 提示：</div>
            <div>• 右側為遊戲區域</div>
            <div>• 敵人從右側路徑進攻</div>
            <div>• 在右側區域建造塔防</div>
        </div>
        <div style="margin-top: 10px; font-size: 10px;">
            <div style="color: #aaffaa; font-weight: bold;">📋 基礎攻擊塔:</div>
            <div>🔫 機槍塔: 快速連射，性價比優秀</div>
            <div>🎯 狙擊塔: 超遠射程，最高單體DPS</div>
            <div>💥 加農砲: 範圍爆炸，群體清理專家</div>
            
            <div style="color: #ffaaaa; font-weight: bold; margin-top: 3px;">⚡ 元素攻擊塔:</div>
            <div>❄️ 冰凍塔: 減速控制，15%機率凍結</div>
            <div>⚡ 雷電塔: 跳躍攻擊，連鎖多目標</div>
            <div>🔥 火焰塔: 火焰流燃燒，持續傷害</div>
            
            <div style="color: #aaaaff; font-weight: bold; margin-top: 3px;">🎯 範圍攻擊塔:</div>
            <div>☠️ 毒氣塔: 毒氣雲AoE，降護甲</div>
            <div>🎆 多管塔: 多目標齊射，追蹤彈藥</div>
            <div>🌪️ 旋風塔: 多目標攻擊(2+等級個)，沿路徑擊退</div>
            
            <div style="color: #ffaaff; font-weight: bold; margin-top: 3px;">🛠️ 輔助塔:</div>
            <div>🔮 詛咒塔: 易傷標記，增幅團隊傷害</div>
            <div>💰 金錢塔: 戰術經濟，擊殺/波次/危機獎勵</div>
            <div>💚 治療塔: 攻擊治療雙重功能(全局冷卻)</div>
        </div>
        <div style="margin-top: 8px; font-size: 10px; color: #888;">
            <div style="color: #ffff00; font-weight: bold;">🌟 升級提示:</div>
            <div>• 所有塔都可升級至3級</div>
            <div>• 3級時獲得強力特殊效果</div>
            <div>• 機槍塔可升級至4級</div>
            <div>• 詳細效果請參考遊戲文檔</div>
        </div>

    </div>
    <canvas id="gameCanvas"></canvas>
    <script src="cache_buster.js"></script>
    <script src="game.js?v=20241217001"></script>
</body>
</html>